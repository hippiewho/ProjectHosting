@model myWebsite.Models.ProjectJsonObject

<script>
    $(document).ready(function () {
        $("#GetCommitsAjaxButton").click(function() {
            $.ajax({
                url: "/Projects/GetRawGitCommits/@Model.ProjectId",
                datatype: "JSON",
                success: function(result) {
                    var jsontostringobj = parseJsonObject(result);
                    $("#commitArea").append(jsontostringobj);

                }
            });
            $("#GetCommitsAjaxButton").hide();
        });
    });
</script>
<script>
    function parseJsonObject(jreturn)
    {
        console.log(jreturn);
        var jobj = JSON.parse(jreturn);
        var commitstring = "";

        jobj.forEach(function (key, index)
        {
            console.log(key.sha + " " + key.commit.author.name + " " + key.commit.message + " at index: " + index);
            commitstring = commitstring + "<li>Author:" +
                key.commit.author.name +
                "</li><ul><li><div class=\"CommitShaArea\">Commit SHA: " +
                key.sha +
                "</div></li><li>Commit Date: " +
                key.commit.author.date +
                "</li><li>Commit Message: " +
                key.commit.message +
                "</li></ul><br />";
        });
        return commitstring;
    }
</script>

<div class="container" >
    <h2>Project:</h2> <h2 style="text-align:center">@Model.ProjectName</h2>
</div>


<div >
    <div class="row" style="padding-bottom:2em">

        <img class="img-circle img-responsive center-block" src="@Model.ProjectImagePath" style="width:30em; height:30em;" />
        
    </div>
    <div class="row">
        <div class="pull-xs-left well col-md-6">
            <h3>Description:</h3>
            @Model.ProjectDescription
        </div>
        @if (Model.ProjectUrl.Length > 0)
        {
            <div class="pull-xs-right well col-md-6">
                <h3>Resources:</h3>
                <a href="@Model.ProjectUrl"><img src="http://iconshow.me/media/images/ui/ios7-icons/png/128/social-github.png" style="width: 3em; height: 3em;" alt="github logo"/> GitHub.Com</a>
            </div>  
        }
    </div>
    <div class="row">
        <div class="pull-xs-left well col-md-6">
            <h3>Commit History:</h3>
            <br/>
            <button class="btn btn-default" id="GetCommitsAjaxButton">Get Commits</button>


            <div id="commitArea">


            </div>

        </div>
        </div>
    </div>
